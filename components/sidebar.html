<!-- Sidebar Component for Mazzaro Milano HR System -->
<!-- This component can be included in all pages to maintain consistent navigation -->

<!-- Sidebar -->
<aside class="sidebar">
  <div class="sidebar-header">
    <img src="../assets/img/logo.png" alt="Mazzaro Milano" class="sidebar-logo">
    <button class="sidebar-toggle">
      <i class="fas fa-bars"></i>
    </button>
  </div>
  
  <!-- Admin Menu -->
  <ul class="sidebar-menu admin-menu">
    <li class="sidebar-item">
      <a href="index.html" class="sidebar-link" data-page="dashboard">
        <i class="fas fa-tachometer-alt sidebar-icon"></i>
        <span class="sidebar-text">Tableau de bord</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="employees.html" class="sidebar-link" data-page="employees">
        <i class="fas fa-users sidebar-icon"></i>
        <span class="sidebar-text">Employés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="tickets.html" class="sidebar-link" data-page="tickets">
        <i class="fas fa-tasks sidebar-icon"></i>
        <span class="sidebar-text">Tickets & Tâches</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="attendance.html" class="sidebar-link" data-page="attendance">
        <i class="fas fa-clock sidebar-icon"></i>
        <span class="sidebar-text">Pointage & Présence</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="leave.html" class="sidebar-link" data-page="leave">
        <i class="fas fa-calendar-alt sidebar-icon"></i>
        <span class="sidebar-text">Congés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="calendar.html" class="sidebar-link" data-page="calendar">
        <i class="fas fa-calendar-day sidebar-icon"></i>
        <span class="sidebar-text">Calendrier</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="statistics.html" class="sidebar-link" data-page="statistics">
        <i class="fas fa-chart-bar sidebar-icon"></i>
        <span class="sidebar-text">Statistiques</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="evaluations.html" class="sidebar-link" data-page="evaluations">
        <i class="fas fa-star sidebar-icon"></i>
        <span class="sidebar-text">Évaluations</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="settings.html" class="sidebar-link" data-page="settings">
        <i class="fas fa-cog sidebar-icon"></i>
        <span class="sidebar-text">Paramètres</span>
      </a>
    </li>
  </ul>
  
  <!-- Sector Manager Menu (hidden by default) -->
  <ul class="sidebar-menu sector-menu" style="display: none;">
    <li class="sidebar-item">
      <a href="index.html" class="sidebar-link" data-page="dashboard">
        <i class="fas fa-tachometer-alt sidebar-icon"></i>
        <span class="sidebar-text">Tableau de bord</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="employees.html" class="sidebar-link" data-page="employees">
        <i class="fas fa-users sidebar-icon"></i>
        <span class="sidebar-text">Employés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="tickets.html" class="sidebar-link" data-page="tickets">
        <i class="fas fa-tasks sidebar-icon"></i>
        <span class="sidebar-text">Tickets & Tâches</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="attendance.html" class="sidebar-link" data-page="attendance">
        <i class="fas fa-clock sidebar-icon"></i>
        <span class="sidebar-text">Pointage & Présence</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="leave.html" class="sidebar-link" data-page="leave">
        <i class="fas fa-calendar-alt sidebar-icon"></i>
        <span class="sidebar-text">Congés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="calendar.html" class="sidebar-link" data-page="calendar">
        <i class="fas fa-calendar-day sidebar-icon"></i>
        <span class="sidebar-text">Calendrier</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="statistics.html" class="sidebar-link" data-page="statistics">
        <i class="fas fa-chart-bar sidebar-icon"></i>
        <span class="sidebar-text">Statistiques</span>
      </a>
    </li>
  </ul>
  
  <!-- Store Manager Menu (hidden by default) -->
  <ul class="sidebar-menu store-menu" style="display: none;">
    <li class="sidebar-item">
      <a href="index.html" class="sidebar-link" data-page="dashboard">
        <i class="fas fa-tachometer-alt sidebar-icon"></i>
        <span class="sidebar-text">Tableau de bord</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="employees.html" class="sidebar-link" data-page="employees">
        <i class="fas fa-users sidebar-icon"></i>
        <span class="sidebar-text">Employés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="tickets.html" class="sidebar-link" data-page="tickets">
        <i class="fas fa-tasks sidebar-icon"></i>
        <span class="sidebar-text">Tickets & Tâches</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="attendance.html" class="sidebar-link" data-page="attendance">
        <i class="fas fa-clock sidebar-icon"></i>
        <span class="sidebar-text">Pointage & Présence</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="leave.html" class="sidebar-link" data-page="leave">
        <i class="fas fa-calendar-alt sidebar-icon"></i>
        <span class="sidebar-text">Congés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="calendar.html" class="sidebar-link" data-page="calendar">
        <i class="fas fa-calendar-day sidebar-icon"></i>
        <span class="sidebar-text">Calendrier</span>
      </a>
    </li>
  </ul>
  
  <!-- Employee Menu (hidden by default) -->
  <ul class="sidebar-menu employee-menu" style="display: none;">
    <li class="sidebar-item">
      <a href="index.html" class="sidebar-link" data-page="dashboard">
        <i class="fas fa-tachometer-alt sidebar-icon"></i>
        <span class="sidebar-text">Tableau de bord</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="profile.html" class="sidebar-link" data-page="profile">
        <i class="fas fa-user sidebar-icon"></i>
        <span class="sidebar-text">Mon profil</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="tickets.html" class="sidebar-link" data-page="tickets">
        <i class="fas fa-tasks sidebar-icon"></i>
        <span class="sidebar-text">Mes tâches</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="attendance.html" class="sidebar-link" data-page="attendance">
        <i class="fas fa-clock sidebar-icon"></i>
        <span class="sidebar-text">Pointage</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="leave.html" class="sidebar-link" data-page="leave">
        <i class="fas fa-calendar-alt sidebar-icon"></i>
        <span class="sidebar-text">Mes congés</span>
      </a>
    </li>
    <li class="sidebar-item">
      <a href="calendar.html" class="sidebar-link" data-page="calendar">
        <i class="fas fa-calendar-day sidebar-icon"></i>
        <span class="sidebar-text">Calendrier</span>
      </a>
    </li>
  </ul>
  
  <div class="sidebar-footer">
    <span>Mazzaro Milano RH v1.0</span>
  </div>
</aside>

<!-- Sidebar Overlay (for mobile) -->
<div class="sidebar-overlay"></div>

<script>
  // Function to show the correct sidebar menu based on user role
  function showSidebarMenuByRole(role) {
    // Hide all menus first
    document.querySelectorAll('.sidebar-menu').forEach(menu => {
      menu.style.display = 'none';
    });
    
    // Show the appropriate menu based on role
    switch(role) {
      case 'admin':
        document.querySelector('.admin-menu').style.display = 'block';
        break;
      case 'sector':
        document.querySelector('.sector-menu').style.display = 'block';
        break;
      case 'store':
        document.querySelector('.store-menu').style.display = 'block';
        break;
      case 'employee':
        document.querySelector('.employee-menu').style.display = 'block';
        break;
      default:
        // Default to employee menu
        document.querySelector('.employee-menu').style.display = 'block';
    }
  }
  
  // Function to mark the active sidebar link based on current page
  function setActiveSidebarLink() {
    // Get current page from URL
    const currentPage = window.location.pathname.split('/').pop().split('.')[0];
    
    // Set active class on appropriate link
    document.querySelectorAll('.sidebar-link').forEach(link => {
      if (link.getAttribute('data-page') === currentPage) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
  }
  
  // Initialize sidebar when DOM is loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Get user role from auth.js
    const userRole = window.auth ? window.auth.getUserRole() : 'employee';
    
    // Show the appropriate menu
    showSidebarMenuByRole(userRole);
    
    // Set active link
    setActiveSidebarLink();
    
    // Toggle sidebar on mobile
    const sidebarToggle = document.querySelector('.sidebar-toggle');
    const sidebar = document.querySelector('.sidebar');
    const sidebarOverlay = document.querySelector('.sidebar-overlay');
    
    if (sidebarToggle && sidebar && sidebarOverlay) {
      sidebarToggle.addEventListener('click', function() {
        sidebar.classList.toggle('sidebar-visible');
        sidebarOverlay.classList.toggle('overlay-visible');
      });
      
      sidebarOverlay.addEventListener('click', function() {
        sidebar.classList.remove('sidebar-visible');
        sidebarOverlay.classList.remove('overlay-visible');
      });
    }
  });
</script>
